db.listingsAndReviews.aggregate(
    [ { $match : { "address.market" : "Porto" } }, {
       $group:
         {
           _id: null,
           avgPrice: { $avg: "$price" }
         }
     } ]
);